"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[269],{75269:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var r=n(80218),o=n(90438),i=n(22790),a=n(51909),c=n(2265),s=n(13917),l=n(10462),u=n.n(l),f=n(40189),p=n(89187),d=n(81640),h=n(6304),y=n(22988),v=n(135),b=n(10875),m=(0,n(47743).Z)(c.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person"),g=c.forwardRef(function(e,t){var n,r,o,i,a,s,l=e.alt,u=e.children,f=e.classes,p=e.className,d=e.component,h=e.imgProps,g=e.sizes,w=e.src,O=e.srcSet,j=e.variant,P=(0,v.Z)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),C=null,E=(r=(n={src:w,srcSet:O}).src,o=n.srcSet,a=(i=c.useState(!1))[0],s=i[1],c.useEffect(function(){if(r||o){s(!1);var e=!0,t=new Image;return t.src=r,t.srcSet=o,t.onload=function(){e&&s("loaded")},t.onerror=function(){e&&s("error")},function(){e=!1}}},[r,o]),a),k=w||O,x=k&&"error"!==E;return C=x?c.createElement("img",(0,y.Z)({alt:l,src:w,srcSet:O,sizes:g,className:f.img},h)):null!=u?u:k&&l?l[0]:c.createElement(m,{className:f.fallback}),c.createElement(void 0===d?"div":d,(0,y.Z)({className:(0,b.default)(f.root,f.system,f[void 0===j?"circular":j],p,!x&&f.colorDefault),ref:t},P),C)}),w=(0,i.Z)(function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},circular:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}},{name:"MuiAvatar"})(g),O=n(46004),j=n(660),P=n(49810),C=n(56800),E=n.n(C);n(51258);var k=n(59911),x=n(85538),I=n(58010);function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(S=function(){return!!e})()}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var N=function(e){var t;function n(e){var t,r,o;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),r=n,o=[e],r=_(r),(t=function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,S()?Reflect.construct(r,o||[],_(this).constructor):r.apply(this,o))).state={requestedAnnotations:!1},t.handleSelect=t.handleSelect.bind(t),t.handleKey=t.handleKey.bind(t),t.handleIntersection=t.handleIntersection.bind(t),t}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(n,e),t=[{key:"handleSelect",value:function(){var e=this.props,t=e.canvas,n=e.selected,r=e.setCanvas,o=e.focusOnCanvas;n?o():r(t.id)}},{key:"handleKey",value:function(e){var t=this.props,n=t.canvas,r=t.setCanvas,o=t.focusOnCanvas;this.keys={enter:"Enter",space:" "},this.chars={enter:13,space:32},e.key===this.keys.enter||e.which===this.chars.enter||e.key===this.keys.space||e.which===this.chars.space?o():r(n.id)}},{key:"handleIntersection",value:function(e){var t=e.isIntersecting,n=this.props,r=n.annotationsCount,o=n.requestCanvasAnnotations,i=this.state.requestedAnnotations;!t||void 0===r||r>0||i||(this.setState({requestedAnnotations:!0}),o())}},{key:"render",value:function(){var e=this.props,t=e.annotationsCount,n=e.searchAnnotationsCount,r=e.canvas,o=e.classes,i=e.config,a=e.selected,s=new x.Z(r);return c.createElement(k.ZP,{onChange:this.handleIntersection},c.createElement("div",{key:r.index,className:E()(o.galleryViewItem,a?o.selected:"",n>0?o.hasAnnotations:""),onClick:this.handleSelect,onKeyUp:this.handleKey,role:"button",tabIndex:0},c.createElement(I.Z,{resource:r,labelled:!0,variant:"outside",maxWidth:i.width,maxHeight:i.height,style:{margin:"0 auto",maxWidth:"".concat(Math.ceil(i.height*s.aspectRatio),"px")}},c.createElement("div",{className:o.chips},n>0&&c.createElement(O.Z,{avatar:c.createElement(w,{className:o.avatar,classes:{circle:o.avatarIcon}},c.createElement(P.Z,{fontSize:"small"})),label:n,className:E()(o.searchChip),size:"small"}),(t||0)>0&&c.createElement(O.Z,{avatar:c.createElement(w,{className:o.avatar,classes:{circle:o.avatarIcon}},c.createElement(j.Z,{className:o.annotationIcon})),label:t,className:E()(o.annotationsChip),size:"small"})))))}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r.key),r)}}(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),n}(c.Component);N.defaultProps={annotationsCount:void 0,config:{height:100,width:null},requestCanvasAnnotations:function(){},searchAnnotationsCount:0,selected:!1};var Z=n(22180),R=n(42588),D=n(32080),T=n(21242),q=n(32571);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){var r,o;r=t,o=n[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var K=(0,r.qC)((0,o.$j)(function(e,t){var n=t.canvas,r=t.windowId,o=(0,Z.Pm)(e,{windowId:r}),i=(0,R.kM)(e,{windowId:r}),a=u()(i.map(function(e){return e.resources})).filter(function(e){return e.targetId===n.id}),c=(0,D.ig)(e,{content:"annotations",windowId:r}).length>0;return{annotationsCount:function(){if(c)return(0,T.A7)(e,{canvasId:n.id}).reduce(function(e,t){return e+t.resources.filter(function(e){return e.targetId===n.id}).length},0)}(),config:(0,q.iE)(e).galleryView,searchAnnotationsCount:a.length,selected:o&&o.id===n.id}},function(e,t){var n=t.canvas,r=(t.id,t.windowId);return{focusOnCanvas:function(){return e(f.cx(r,"single"))},requestCanvasAnnotations:function(){return e(p.pj(r,n.id))},setCanvas:function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return e(d.ji.apply(h,[r].concat(n)))}}}),(0,i.Z)(function(e){return{annotationIcon:{height:"1rem",width:"1rem"},annotationsChip:$({},e.typography.caption),avatar:{backgroundColor:"transparent"},chips:{opacity:.875,position:"absolute",right:0,textAlign:"right",top:0},galleryViewItem:{"&$hasAnnotations":{border:"2px solid ".concat(e.palette.action.selected)},"&$selected,&$selected$hasAnnotations":{border:"2px solid ".concat(e.palette.primary.main)},"&:focus":{outline:"none"},"&:hover":{backgroundColor:e.palette.action.hover},border:"2px solid transparent",cursor:"pointer",display:"inline-block",margin:"".concat(e.spacing(1),"px ").concat(e.spacing(.5),"px"),maxHeight:function(e){return e.config.height+45},minWidth:"60px",overflow:"hidden",padding:e.spacing(.5),position:"relative",width:"min-content"},hasAnnotations:{},searchChip:$($({},e.typography.caption),{},{"&$selected $avatar":{backgroundColor:e.palette.highlights.primary},marginTop:2}),selected:{}}}))(N);function B(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(B=function(){return!!e})()}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var W=function(e){var t;function n(){var e,t;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),e=n,t=arguments,e=M(e),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,B()?Reflect.construct(e,t||[],M(this).constructor):e.apply(this,t))}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(n,e),t=[{key:"render",value:function(){var e=this.props,t=e.canvases,n=e.classes,r=e.viewingDirection,o=e.windowId;return c.createElement(s.Z,{component:"section",dir:"right-to-left"===r?"rtl":"ltr",square:!0,elevation:0,className:n.galleryContainer,id:"".concat(o,"-gallery")},t.map(function(e){return c.createElement(K,{key:e.id,windowId:o,canvas:e})}))}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r.key),r)}}(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),n}(c.Component);W.defaultProps={classes:{},viewingDirection:""};var F=n(84378),H=(0,r.qC)((0,i.Z)(function(e){return{galleryContainer:{alignItems:"flex-start",display:"flex",flexDirection:"row",flexWrap:"wrap",overflowX:"hidden",overflowY:"scroll",padding:"50px 0 50px 20px",width:"100%"}}}),(0,o.$j)(function(e,t){var n=t.windowId;return{canvases:(0,Z.LU)(e,{windowId:n}),viewingDirection:(0,F.Xf)(e,{windowId:n})}}),(0,a.A)("GalleryView"))(W)}}]);